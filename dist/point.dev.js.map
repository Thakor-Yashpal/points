{"version":3,"sources":["point.js"],"names":["window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","Vector","x","y","add","a","b","sub","scale","v","s","clone","random","Math","prototype","set","length","sqrt","lengthSq","normalize","m","angle","atan2","angleTo","dx","dy","distanceTo","distanceToSq","lerp","t","toString","GravityPoint","radius","targets","call","currentRadius","_targets","particles","gravities","_speed","RADIUS_LIMIT","interferenceToPoint","o","p","gravity","isMouseOver","dragging","destroyed","_easeRadius","_dragDistance","_collapsing","hitTest","startDrag","dragStartPoint","drag","dragToPoint","endDrag","addSpeed","d","collapse","e","render","ctx","i","len","_draw","g","absorp","area","PI","garea","grd","r","save","createRadialGradient","addColorStop","beginPath","arc","fillStyle","fill","restore","Particle","_latest","update","BACKGROUND_COLOR","PARTICLE_RADIUS","G_POINT_RADIUS","G_POINT_RADIUS_LIMITS","canvas","context","bufferCvs","bufferCtx","screenWidth","screenHeight","mouse","grad","gui","control","resize","width","innerWidth","height","innerHeight","getContext","cx","cy","mouseMove","clientX","clientY","hit","style","cursor","mouseDown","push","mouseUp","doubleClick","addParticle","num","floor","removeParticle","pop","particleNum","document","getElementById","createElement","addEventListener","dat","GUI","step","name","onChange","n","close","loop","fillRect","splice","globalCompositeOperation","globalAlpha","strokeStyle","lineCap","lineJoin","lineWidth","moveTo","lineTo","stroke","drawImage"],"mappings":"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","sourcesContent":["window.requestAnimationFrame = (function() {\r\n    return window.requestAnimationFrame ||\r\n        window.webkitRequestAnimationFrame ||\r\n        window.mozRequestAnimationFrame ||\r\n        window.oRequestAnimationFrame ||\r\n        window.msRequestAnimationFrame ||\r\n        function(callback) {\r\n            window.setTimeout(callback, 1000 / 60);\r\n        };\r\n})();\r\n\r\n\r\n/**\r\n * Vector\r\n */\r\nfunction Vector(x, y) {\r\n    this.x = x || 0;\r\n    this.y = y || 0;\r\n}\r\n\r\nVector.add = function(a, b) {\r\n    return new Vector(a.x + b.x, a.y + b.y);\r\n};\r\n\r\nVector.sub = function(a, b) {\r\n    return new Vector(a.x - b.x, a.y - b.y);\r\n};\r\n\r\nVector.scale = function(v, s) {\r\n    return v.clone().scale(s);\r\n};\r\n\r\nVector.random = function() {\r\n    return new Vector(\r\n        Math.random() * 2 - 1,\r\n        Math.random() * 2 - 1\r\n    );\r\n};\r\n\r\nVector.prototype = {\r\n    set: function(x, y) {\r\n        if (typeof x === 'object') {\r\n            y = x.y;\r\n            x = x.x;\r\n        }\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n        return this;\r\n    },\r\n\r\n    add: function(v) {\r\n        this.x += v.x;\r\n        this.y += v.y;\r\n        return this;\r\n    },\r\n\r\n    sub: function(v) {\r\n        this.x -= v.x;\r\n        this.y -= v.y;\r\n        return this;\r\n    },\r\n\r\n    scale: function(s) {\r\n        this.x *= s;\r\n        this.y *= s;\r\n        return this;\r\n    },\r\n\r\n    length: function() {\r\n        return Math.sqrt(this.x * this.x + this.y * this.y);\r\n    },\r\n\r\n    lengthSq: function() {\r\n        return this.x * this.x + this.y * this.y;\r\n    },\r\n\r\n    normalize: function() {\r\n        var m = Math.sqrt(this.x * this.x + this.y * this.y);\r\n        if (m) {\r\n            this.x /= m;\r\n            this.y /= m;\r\n        }\r\n        return this;\r\n    },\r\n\r\n    angle: function() {\r\n        return Math.atan2(this.y, this.x);\r\n    },\r\n\r\n    angleTo: function(v) {\r\n        var dx = v.x - this.x,\r\n            dy = v.y - this.y;\r\n        return Math.atan2(dy, dx);\r\n    },\r\n\r\n    distanceTo: function(v) {\r\n        var dx = v.x - this.x,\r\n            dy = v.y - this.y;\r\n        return Math.sqrt(dx * dx + dy * dy);\r\n    },\r\n\r\n    distanceToSq: function(v) {\r\n        var dx = v.x - this.x,\r\n            dy = v.y - this.y;\r\n        return dx * dx + dy * dy;\r\n    },\r\n\r\n    lerp: function(v, t) {\r\n        this.x += (v.x - this.x) * t;\r\n        this.y += (v.y - this.y) * t;\r\n        return this;\r\n    },\r\n\r\n    clone: function() {\r\n        return new Vector(this.x, this.y);\r\n    },\r\n\r\n    toString: function() {\r\n        return '(x:' + this.x + ', y:' + this.y + ')';\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * GravityPoint\r\n */\r\nfunction GravityPoint(x, y, radius, targets) {\r\n    Vector.call(this, x, y);\r\n    this.radius = radius;\r\n    this.currentRadius = radius * 0.5;\r\n\r\n    this._targets = {\r\n        particles: targets.particles || [],\r\n        gravities: targets.gravities || []\r\n    };\r\n    this._speed = new Vector();\r\n}\r\n\r\nGravityPoint.RADIUS_LIMIT = 65;\r\nGravityPoint.interferenceToPoint = true;\r\n\r\nGravityPoint.prototype = (function(o) {\r\n    var s = new Vector(0, 0),\r\n        p;\r\n    for (p in o) s[p] = o[p];\r\n    return s;\r\n})({\r\n    gravity: 0.05,\r\n    isMouseOver: false,\r\n    dragging: false,\r\n    destroyed: false,\r\n    _easeRadius: 0,\r\n    _dragDistance: null,\r\n    _collapsing: false,\r\n\r\n    hitTest: function(p) {\r\n        return this.distanceTo(p) < this.radius;\r\n    },\r\n\r\n    startDrag: function(dragStartPoint) {\r\n        this._dragDistance = Vector.sub(dragStartPoint, this);\r\n        this.dragging = true;\r\n    },\r\n\r\n    drag: function(dragToPoint) {\r\n        this.x = dragToPoint.x - this._dragDistance.x;\r\n        this.y = dragToPoint.y - this._dragDistance.y;\r\n    },\r\n\r\n    endDrag: function() {\r\n        this._dragDistance = null;\r\n        this.dragging = false;\r\n    },\r\n\r\n    addSpeed: function(d) {\r\n        this._speed = this._speed.add(d);\r\n    },\r\n\r\n    collapse: function(e) {\r\n        this.currentRadius *= 1.75;\r\n        this._collapsing = true;\r\n    },\r\n\r\n    render: function(ctx) {\r\n        if (this.destroyed) return;\r\n\r\n        var particles = this._targets.particles,\r\n            i, len;\r\n\r\n        for (i = 0, len = particles.length; i < len; i++) {\r\n            particles[i].addSpeed(Vector.sub(this, particles[i]).normalize().scale(this.gravity));\r\n        }\r\n\r\n        this._easeRadius = (this._easeRadius + (this.radius - this.currentRadius) * 0.07) * 0.95;\r\n        this.currentRadius += this._easeRadius;\r\n        if (this.currentRadius < 0) this.currentRadius = 0;\r\n\r\n        if (this._collapsing) {\r\n            this.radius *= 0.75;\r\n            if (this.currentRadius < 1) this.destroyed = true;\r\n            this._draw(ctx);\r\n            return;\r\n        }\r\n\r\n        var gravities = this._targets.gravities,\r\n            g, absorp,\r\n            area = this.radius * this.radius * Math.PI,\r\n            garea;\r\n\r\n        for (i = 0, len = gravities.length; i < len; i++) {\r\n            g = gravities[i];\r\n\r\n            if (g === this || g.destroyed) continue;\r\n\r\n            if (\r\n                (this.currentRadius >= g.radius || this.dragging) &&\r\n                this.distanceTo(g) < (this.currentRadius + g.radius) * 0.85\r\n            ) {\r\n                g.destroyed = true;\r\n                this.gravity += g.gravity;\r\n\r\n                absorp = Vector.sub(g, this).scale(g.radius / this.radius * 0.5);\r\n                this.addSpeed(absorp);\r\n\r\n                garea = g.radius * g.radius * Math.PI;\r\n                this.currentRadius = Math.sqrt((area + garea * 3) / Math.PI);\r\n                this.radius = Math.sqrt((area + garea) / Math.PI);\r\n            }\r\n\r\n            g.addSpeed(Vector.sub(this, g).normalize().scale(this.gravity));\r\n        }\r\n\r\n        if (GravityPoint.interferenceToPoint && !this.dragging)\r\n            this.add(this._speed);\r\n\r\n        this._speed = new Vector();\r\n\r\n        if (this.currentRadius > GravityPoint.RADIUS_LIMIT) this.collapse();\r\n\r\n        this._draw(ctx);\r\n    },\r\n\r\n    _draw: function(ctx) {\r\n        var grd, r;\r\n\r\n        ctx.save();\r\n\r\n        grd = ctx.createRadialGradient(this.x, this.y, this.radius, this.x, this.y, this.radius * 5);\r\n        grd.addColorStop(0, 'rgba(0, 0, 0, 0.1)');\r\n        grd.addColorStop(1, 'rgba(0, 0, 0, 0)');\r\n        ctx.beginPath();\r\n        ctx.arc(this.x, this.y, this.radius * 5, 0, Math.PI * 2, false);\r\n        ctx.fillStyle = grd;\r\n        ctx.fill();\r\n\r\n        r = Math.random() * this.currentRadius * 0.7 + this.currentRadius * 0.3;\r\n        grd = ctx.createRadialGradient(this.x, this.y, r, this.x, this.y, this.currentRadius);\r\n        grd.addColorStop(0, 'rgba(0, 0, 0, 1)');\r\n        grd.addColorStop(1, Math.random() < 0.2 ? 'rgba(255, 196, 0, 0.15)' : 'rgba(103, 181, 191, 0.75)');\r\n        ctx.beginPath();\r\n        ctx.arc(this.x, this.y, this.currentRadius, 0, Math.PI * 2, false);\r\n        ctx.fillStyle = grd;\r\n        ctx.fill();\r\n        ctx.restore();\r\n    }\r\n});\r\n\r\n\r\n/**\r\n * Particle\r\n */\r\nfunction Particle(x, y, radius) {\r\n    Vector.call(this, x, y);\r\n    this.radius = radius;\r\n\r\n    this._latest = new Vector();\r\n    this._speed = new Vector();\r\n}\r\n\r\nParticle.prototype = (function(o) {\r\n    var s = new Vector(0, 0),\r\n        p;\r\n    for (p in o) s[p] = o[p];\r\n    return s;\r\n})({\r\n    addSpeed: function(d) {\r\n        this._speed.add(d);\r\n    },\r\n\r\n    update: function() {\r\n        if (this._speed.length() > 12) this._speed.normalize().scale(12);\r\n\r\n        this._latest.set(this);\r\n        this.add(this._speed);\r\n    }\r\n\r\n    // render: function(ctx) {\r\n    //     if (this._speed.length() > 12) this._speed.normalize().scale(12);\r\n\r\n    //     this._latest.set(this);\r\n    //     this.add(this._speed);\r\n\r\n    //     ctx.save();\r\n    //     ctx.fillStyle = ctx.strokeStyle = '#fff';\r\n    //     ctx.lineCap = ctx.lineJoin = 'round';\r\n    //     ctx.lineWidth = this.radius * 2;\r\n    //     ctx.beginPath();\r\n    //     ctx.moveTo(this.x, this.y);\r\n    //     ctx.lineTo(this._latest.x, this._latest.y);\r\n    //     ctx.stroke();\r\n    //     ctx.beginPath();\r\n    //     ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\r\n    //     ctx.fill();\r\n    //     ctx.restore();\r\n    // }\r\n});\r\n\r\n\r\n\r\n// Initialize\r\n\r\n(function() {\r\n\r\n    // Configs\r\n\r\n    var BACKGROUND_COLOR = 'rgba(11, 51, 56, 1)',\r\n        PARTICLE_RADIUS = 1,\r\n        G_POINT_RADIUS = 10,\r\n        G_POINT_RADIUS_LIMITS = 65;\r\n\r\n\r\n    // Vars\r\n\r\n    var canvas, context,\r\n        bufferCvs, bufferCtx,\r\n        screenWidth, screenHeight,\r\n        mouse = new Vector(),\r\n        gravities = [],\r\n        particles = [],\r\n        grad,\r\n        gui, control;\r\n\r\n\r\n    // Event Listeners\r\n\r\n    function resize(e) {\r\n        screenWidth = canvas.width = window.innerWidth;\r\n        screenHeight = canvas.height = window.innerHeight;\r\n        bufferCvs.width = screenWidth;\r\n        bufferCvs.height = screenHeight;\r\n        context = canvas.getContext('2d');\r\n        bufferCtx = bufferCvs.getContext('2d');\r\n\r\n        var cx = canvas.width * 0.5,\r\n            cy = canvas.height * 0.5;\r\n\r\n        grad = context.createRadialGradient(cx, cy, 0, cx, cy, Math.sqrt(cx * cx + cy * cy));\r\n        grad.addColorStop(0, 'rgba(0, 0, 0, 0)');\r\n        grad.addColorStop(1, 'rgba(0, 0, 0, 0.35)');\r\n    }\r\n\r\n    function mouseMove(e) {\r\n        mouse.set(e.clientX, e.clientY);\r\n\r\n        var i, g, hit = false;\r\n        for (i = gravities.length - 1; i >= 0; i--) {\r\n            g = gravities[i];\r\n            if ((!hit && g.hitTest(mouse)) || g.dragging)\r\n                g.isMouseOver = hit = true;\r\n            else\r\n                g.isMouseOver = false;\r\n        }\r\n\r\n        canvas.style.cursor = hit ? 'pointer' : 'default';\r\n    }\r\n\r\n    function mouseDown(e) {\r\n        for (var i = gravities.length - 1; i >= 0; i--) {\r\n            if (gravities[i].isMouseOver) {\r\n                gravities[i].startDrag(mouse);\r\n                return;\r\n            }\r\n        }\r\n        gravities.push(new GravityPoint(e.clientX, e.clientY, G_POINT_RADIUS, {\r\n            particles: particles,\r\n            gravities: gravities\r\n        }));\r\n    }\r\n\r\n    function mouseUp(e) {\r\n        for (var i = 0, len = gravities.length; i < len; i++) {\r\n            if (gravities[i].dragging) {\r\n                gravities[i].endDrag();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    function doubleClick(e) {\r\n        for (var i = gravities.length - 1; i >= 0; i--) {\r\n            if (gravities[i].isMouseOver) {\r\n                gravities[i].collapse();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    // in  line code \r\n\r\n    function addParticle(num) {\r\n        var i, p;\r\n        for (i = 0; i < num; i++) {\r\n            p = new Particle(\r\n                Math.floor(Math.random() * screenWidth - PARTICLE_RADIUS * 2) + 1 + PARTICLE_RADIUS,\r\n                Math.floor(Math.random() * screenHeight - PARTICLE_RADIUS * 2) + 1 + PARTICLE_RADIUS,\r\n                PARTICLE_RADIUS\r\n            );\r\n            p.addSpeed(Vector.random());\r\n            particles.push(p);\r\n        }\r\n    }\r\n\r\n    function removeParticle(num) {\r\n        if (particles.length < num) num = particles.length;\r\n        for (var i = 0; i < num; i++) {\r\n            particles.pop();\r\n        }\r\n    }\r\n\r\n\r\n    // GUI Control\r\n\r\n    control = {\r\n        particleNum: 100\r\n    };\r\n\r\n\r\n    // Init\r\n\r\n    canvas = document.getElementById('c');\r\n    bufferCvs = document.createElement('canvas');\r\n\r\n    window.addEventListener('resize', resize, false);\r\n    resize(null);\r\n\r\n    addParticle(control.particleNum);\r\n\r\n    canvas.addEventListener('mousemove', mouseMove, false);\r\n    canvas.addEventListener('mousedown', mouseDown, false);\r\n    canvas.addEventListener('mouseup', mouseUp, false);\r\n    canvas.addEventListener('dblclick', doubleClick, false);\r\n\r\n\r\n    // GUI\r\n\r\n    gui = new dat.GUI();\r\n    gui.add(control, 'particleNum', 0, 500).step(1).name('Particle Num').onChange(function() {\r\n        var n = (control.particleNum | 0) - particles.length;\r\n        if (n > 0)\r\n            addParticle(n);\r\n        else if (n < 0)\r\n            removeParticle(-n);\r\n    });\r\n    gui.add(GravityPoint, 'interferenceToPoint').name('Interference Between Point');\r\n    gui.close();\r\n\r\n\r\n    // Start Update\r\n\r\n    var loop = function() {\r\n        var i, len, g, p;\r\n\r\n        context.save();\r\n        context.fillStyle = BACKGROUND_COLOR;\r\n        context.fillRect(0, 0, screenWidth, screenHeight);\r\n        context.fillStyle = grad;\r\n        context.fillRect(0, 0, screenWidth, screenHeight);\r\n        context.restore();\r\n\r\n        for (i = 0, len = gravities.length; i < len; i++) {\r\n            g = gravities[i];\r\n            if (g.dragging) g.drag(mouse);\r\n            g.render(context);\r\n            if (g.destroyed) {\r\n                gravities.splice(i, 1);\r\n                len--;\r\n                i--;\r\n            }\r\n        }\r\n\r\n        bufferCtx.save();\r\n        bufferCtx.globalCompositeOperation = 'destination-out';\r\n        bufferCtx.globalAlpha = 0.35;\r\n        bufferCtx.fillRect(0, 0, screenWidth, screenHeight);\r\n        bufferCtx.restore();\r\n\r\n        // len\r\n        len = particles.length;\r\n        bufferCtx.save();\r\n        bufferCtx.fillStyle = bufferCtx.strokeStyle = '#fff';\r\n        bufferCtx.lineCap = bufferCtx.lineJoin = 'round';\r\n        bufferCtx.lineWidth = PARTICLE_RADIUS * 2;\r\n        bufferCtx.beginPath();\r\n        for (i = 0; i < len; i++) {\r\n            p = particles[i];\r\n            p.update();\r\n            bufferCtx.moveTo(p.x, p.y);\r\n            bufferCtx.lineTo(p._latest.x, p._latest.y);\r\n        }\r\n        bufferCtx.stroke();\r\n        bufferCtx.beginPath();\r\n        for (i = 0; i < len; i++) {\r\n            p = particles[i];\r\n            bufferCtx.moveTo(p.x, p.y);\r\n            bufferCtx.arc(p.x, p.y, p.radius, 0, Math.PI * 2, false);\r\n        }\r\n        bufferCtx.fill();\r\n        bufferCtx.restore();\r\n\r\n\r\n        context.drawImage(bufferCvs, 0, 0);\r\n\r\n        requestAnimationFrame(loop);\r\n    };\r\n    loop();\r\n\r\n})();"],"file":"point.dev.js"}